@inherits ViewPage<WebCourse>
@{
    ViewBag.Title = Model.Course.CourseName;
}
<link href="/Scripts/lib/codemirror.css" rel="stylesheet" />
<link href="/Scripts/lib/theme/ambiance.css" rel="stylesheet" />
    <link rel="stylesheet" href="Scripts/lib/doc/docs.css">
<script src="/Scripts/lib/codemirror.js" type="text/javascript"></script>
<script src="/Scripts/jquery-1.8.2.js" type="text/javascript"></script>
<script src="/Scripts/lib/mode/clike/clike.js" type="text/javascript"></script>
@{
    if (Model.CurrentLevelNo == default(int))
    {
        <h1>@Model.Course.CourseName</h1>
        <a href="/levels/@Model.Course.Id/1">Start the course</a>
    }

    else if (Model.CurrentChallengeNo == default(int))
    {
        <div align="center">
            <iframe src="@Model.CurrentLevel.LevelVideoUri" width="800" 
                    height="600" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
            <br />
            <a  href="/challenges/@Model.Course.Id/@Model.CurrentLevelNo/1">Challenges</a>
        </div>
    }

    else
    {
        foreach (var codeFile in Model.CurrentChallenge.CodeFiles)
        {
            <label>@codeFile.FileName</label>
            <textarea>@codeFile.InitialText</textarea>
        }
        <script type="text/javascript">
            $('textarea').each(function(index, textArea) {
                var editor = CodeMirror.fromTextArea(textArea, {
                    mode: "text/x-csrc",
                    lineNumbers: true,
                    matchBrackets: true,
                    theme: "ambiance"
                });
            });
        </script>
    }
}    